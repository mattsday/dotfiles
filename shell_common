# This file contains alias definitions and variables that are common 
# between both zsh and bash... rather than maintain two sets, both 
# rcfiles load this
# Latest copy always here: https://github.com/mattsday/dotfiles/

# =================
# Alias definitions
# =================
# Check the presence of various utilities and alias them to give them
# preference ahead of lesser system defaults

# If vim exists somewhere, make it the default editor:
if [[ -x $(which vim 2> /dev/null) ]]; then
	export VISUAL=$(which vim)
	export USE_EDITOR=$VISUAL
	export EDITOR=$VISUAL
	# Some systems are cruel and have vi + vim installed side-by-side
	alias vi=$VISUAL
fi

# Set less as the default pager
if [[ -x $(which less 2> /dev/null) ]]; then
	export PAGER=$(which less)
fi

# If running on OS X check for coreutils and use them with colour
if [[ -x /usr/local/bin/gls ]]; then
	alias ls='/usr/local/bin/gls --color=auto'
# Otherwise check if /usr/bin/dircolors exists which is a good sign it's GNU ls
elif [[ -x /usr/bin/dircolors ]]; then
	alias ls='ls --color=auto'
fi

# If we can sudo dodo!
if [[ -x /usr/bin/sudo ]]; then
	# Debian based systems
	if [[ -x /usr/bin/apt-get ]]; then
		# I prefer aptitude over apt-get but muscle memory sucks
		if [[ -x /usr/bin/aptitude ]]; then
			alias apt-get='sudo aptitude'
			alias apt-cache='sudo aptitude'
		else
			alias apt-get='sudo apt-get'
		fi
		alias update='apt-get update && apt-get upgrade'
	fi
	# Same if using RPM-based distributions
	if [[ -x /usr/bin/yum ]]; then
		alias yum='sudo yum'
		alias update='yum update'
	fi
	# Always restart services as root
	if [[ -x /usr/sbin/service ]]; then
		alias service='sudo service'
	fi
	if [[ -x /bin/launchctl ]]; then
		alias launchctl='sudo launchctl'
	fi
fi

# Create an update alias if homebrew is installed
if [[ -x /usr/local/bin/brew ]]; then
	alias update='brew update && brew upgrade'
fi

# Colour grep output
alias grep='grep --color=auto'
export GREP_COLORS="ms=01;32:mc=01;31:sl=:cx=:fn=35:ln=32:bn=32:se=36"

# OS X ls colouring (non-gnu ls)
export CLICOLOR="yes"
export LSCOLORS="gxhxfxcxcxdxcxcxcxgxgx"

# Meh, shit happens:
alias 'cd..=cd ..'
alias 'cd~=cd ~'

# Common shortcuts
alias ll='ls -lah'
alias l='ls -aCF'

# =====================
# Environment variables
# =====================
# These affect most systems and are (usually) harmless if run without...

# Sets ls and various commands to use yyyy-mm-dd as the date format
export TIME_STYLE="long-iso"


